{"errorLabelSet":{},"level":"error","message":"MongoDB connection error: connect ECONNREFUSED ::1:27017, connect ECONNREFUSED 127.0.0.1:27017","reason":{"commonWireVersion":0,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"logicalSessionTimeoutMinutes":null,"maxElectionId":null,"maxSetVersion":null,"servers":{"localhost:27017":{"$clusterTime":null,"address":"localhost:27017","arbiters":[],"electionId":null,"error":{"beforeHandshake":false,"errorLabelSet":{}},"hosts":[],"iscryptd":false,"lastUpdateTime":45224011,"lastWriteDate":0,"logicalSessionTimeoutMinutes":null,"maxBsonObjectSize":null,"maxMessageSizeBytes":null,"maxWireVersion":0,"maxWriteBatchSize":null,"me":null,"minRoundTripTime":0,"minWireVersion":0,"passives":[],"primary":null,"roundTripTime":-1,"setName":null,"setVersion":null,"tags":{},"topologyVersion":null,"type":"Unknown"}},"setName":null,"stale":false,"type":"Unknown"},"stack":"MongooseServerSelectionError: connect ECONNREFUSED ::1:27017, connect ECONNREFUSED 127.0.0.1:27017\n    at _handleConnectionErrors (F:\\repos\\BE_AKRAM\\node_modules\\mongoose\\lib\\connection.js:1165:11)\n    at NativeConnection.openUri (F:\\repos\\BE_AKRAM\\node_modules\\mongoose\\lib\\connection.js:1096:11)\n    at connectDB (F:\\repos\\BE_AKRAM\\src\\config\\db.ts:7:5)","timestamp":"2025-04-27T17:39:25.696Z"}
{"address":"127.0.0.1","code":"ESOCKET","command":"CONN","errno":-4078,"level":"error","message":"Error sending email: connect ECONNREFUSED 127.0.0.1:587","port":587,"stack":"Error: connect ECONNREFUSED 127.0.0.1:587\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1636:16)","syscall":"connect","timestamp":"2025-04-27T20:54:23.157Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:17:26.533Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:17:26.534Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:17:39.578Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:17:39.579Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:17:54.056Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:17:54.056Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:18:54.074Z"}
{"level":"error","message":"Error creating order: Cannot read properties of undefined (reading 'toFixed')","stack":"TypeError: Cannot read properties of undefined (reading 'toFixed')\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:149:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:18:54.074Z"}
{"level":"error","message":"Error creating order: order.subtotal.toFixed is not a function","stack":"TypeError: order.subtotal.toFixed is not a function\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:150:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:24:27.188Z"}
{"level":"error","message":"Error creating order: order.subtotal.toFixed is not a function","stack":"TypeError: order.subtotal.toFixed is not a function\n    at OrderService.generateOrderConfirmationEmailTemplate (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:150:83)\n    at OrderService.sendOrderConfirmationEmail (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:96:23)\n    at OrderService.createOrder (F:\\repos\\BE_AKRAM\\src\\services\\orderService.ts:29:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at createOrder (F:\\repos\\BE_AKRAM\\src\\controllers\\orderController.ts:29:19)","timestamp":"2025-04-27T21:24:27.188Z"}
